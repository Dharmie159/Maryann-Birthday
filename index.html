<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Maryann Baby âœ¨</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
<style>

/* â”€â”€ RESET â”€â”€ */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
  --gold:       #c9a84c;
  --gold-light: #e8c97a;
  --gold-dark:  #8a6820;
  --cream:      #fdf6e3;
  --deep:       #1a1008;
  --warm:       #2d1f0a;
  --rose:       #c4788a;
  --frame-bg:   #f5ead0;
}

body {
  background-color: var(--deep);
  color: var(--cream);
  font-family: 'Cormorant Garamond', serif;
  overflow-x: hidden;
}

body::before {
  content:'';
  position:fixed; inset:0;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  pointer-events:none; z-index:9000; opacity:.4;
}

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes fadeUp  { from{opacity:0;transform:translateY(28px);}to{opacity:1;transform:translateY(0);} }
@keyframes fadeIn  { from{opacity:0;}to{opacity:1;} }
@keyframes twinkle { 0%,100%{opacity:0;transform:scale(.5);}50%{opacity:1;transform:scale(1.5);} }
@keyframes bounce  { 0%,100%{transform:rotate(45deg) translateY(0);}50%{transform:rotate(45deg) translateY(5px);} }
@keyframes spin    { from{transform:rotate(0);}to{transform:rotate(360deg);} }
@keyframes pulse-ring { 0%{box-shadow:0 4px 20px rgba(0,0,0,.5),0 0 0 0 rgba(201,168,76,.4);}70%{box-shadow:0 4px 20px rgba(0,0,0,.5),0 0 0 14px rgba(201,168,76,0);}100%{box-shadow:0 4px 20px rgba(0,0,0,.5),0 0 0 0 rgba(201,168,76,0);} }
@keyframes pulse-btn  { 0%,100%{transform:scale(1);}50%{transform:scale(1.04);} }
@keyframes zoomIn  { from{opacity:0;transform:scale(.88);}to{opacity:1;transform:scale(1);} }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WELCOME OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#welcome-overlay {
  position:fixed; inset:0; z-index:10000;
  background:radial-gradient(ellipse at 50% 40%,#3d2505 0%,#0e0805 75%);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  text-align:center; padding:40px 20px; cursor:pointer;
  transition:opacity .8s ease;
}
#overlay-sparkles { position:absolute; inset:0; overflow:hidden; pointer-events:none; }
.ov-tag  { font-family:'Dancing Script',cursive; font-size:clamp(1rem,3vw,1.4rem); color:rgba(201,168,76,.7); letter-spacing:.1em; margin-bottom:16px; position:relative; }
.ov-title{ font-family:'Playfair Display',serif; font-weight:700; font-size:clamp(3rem,12vw,9rem); line-height:.95; background:linear-gradient(135deg,#e8c97a 0%,#c9a84c 40%,#8a6820 80%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; position:relative; margin-bottom:8px; }
.ov-name { font-family:'Playfair Display',serif; font-style:italic; font-weight:400; font-size:clamp(1.6rem,6vw,4rem); color:#fdf6e3; position:relative; margin-bottom:48px; }
.ov-btn  { font-family:'Cormorant Garamond',serif; font-size:1.1rem; font-style:italic; color:#1a1008; background:linear-gradient(135deg,#c9a84c,#e8c97a); border:none; padding:16px 48px; cursor:pointer; letter-spacing:.08em; border-radius:2px; position:relative; animation:pulse-btn 2s ease-in-out infinite; box-shadow:0 4px 20px rgba(201,168,76,.4); }
.ov-hint { font-family:'Cormorant Garamond',serif; font-size:.82rem; font-style:italic; color:rgba(201,168,76,.4); margin-top:20px; letter-spacing:.08em; position:relative; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hero {
  min-height:100vh;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  position:relative; text-align:center;
  padding:60px 20px 80px;
  background:radial-gradient(ellipse at 50% 30%,#3d2505 0%,var(--deep) 70%);
  overflow:hidden;
}
.hero::after {
  content:''; position:absolute; inset:0; pointer-events:none;
  background:radial-gradient(circle at 20% 80%,rgba(201,168,76,.08) 0%,transparent 50%),
             radial-gradient(circle at 80% 20%,rgba(196,120,138,.07) 0%,transparent 50%);
}
.sparkles { position:absolute; inset:0; overflow:hidden; pointer-events:none; }
.sparkle  { position:absolute; border-radius:50%; background:var(--gold-light); animation:twinkle var(--dur,3s) var(--delay,0s) infinite ease-in-out; }

.hero-eyebrow { font-family:'Dancing Script',cursive; font-size:clamp(1.1rem,3vw,1.6rem); color:var(--gold); letter-spacing:.05em; animation:fadeUp 1s .2s both; }
.hero-title   { font-family:'Playfair Display',serif; font-size:clamp(3rem,10vw,8rem); font-weight:700; line-height:1; margin:10px 0 4px; background:linear-gradient(135deg,var(--gold-light) 0%,var(--gold) 40%,var(--gold-dark) 80%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; animation:fadeUp 1s .4s both; }
.hero-name    { font-family:'Playfair Display',serif; font-style:italic; font-size:clamp(2rem,7vw,5.5rem); font-weight:400; color:var(--cream); margin-bottom:30px; animation:fadeUp 1s .6s both; }

.divider { display:flex; align-items:center; gap:16px; margin:20px auto; width:min(400px,80%); animation:fadeUp 1s .8s both; }
.divider-line { flex:1; height:1px; background:linear-gradient(to right,transparent,var(--gold)); }
.divider-line:last-child { background:linear-gradient(to left,transparent,var(--gold)); }
.divider-diamond { width:8px; height:8px; background:var(--gold); transform:rotate(45deg); }

.hero-message { font-size:clamp(1rem,2.5vw,1.3rem); font-style:italic; color:rgba(253,246,227,.75); max-width:520px; line-height:1.8; animation:fadeUp 1s 1s both; }

/* â”€â”€ PORTRAIT FRAME â”€â”€ */
.hero-portrait-wrap {
  margin:48px auto 0;
  display:flex; flex-direction:column; align-items:center;
  animation:fadeUp 1s 1.1s both;
  position:relative; z-index:2; width:100%;
}

.hero-portrait-frame {
  position:relative;
  width:clamp(280px,60vw,520px);
  cursor:pointer;
  filter:drop-shadow(0 12px 40px rgba(0,0,0,.7));
}

/* Photo behind everything â€” fills the full frame area */
.hero-portrait-photo {
  width: 100%;
  aspect-ratio: 3 / 4;
  overflow: hidden;
  background: #1a1208;
  position: relative;
}
.hero-portrait-photo img {
  width:100%; height:100%;
  object-fit:cover; display:block;
  filter:sepia(8%) contrast(1.05);
}
.hero-ph {
  position:absolute; inset:0;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:12px; color:rgba(201,168,76,.45);
  font-family:'Cormorant Garamond',serif; font-style:italic;
  text-align:center; padding:20px;
}
.hero-ph svg { opacity:.3; }
.hero-ph span { font-size:1rem; }
.hero-ph small { font-size:.75rem; opacity:.55; }

/* PNG frame on top */
.frame-png-overlay {
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit:fill;
  pointer-events:none; z-index:3;
}

/* CSS fallback frame */
.frame-css-fallback {
  position:absolute; inset:0; z-index:3; pointer-events:none;
  border:3px solid rgba(201,168,76,.55);
  box-shadow:inset 0 0 0 8px rgba(201,168,76,.07), 0 0 0 1px rgba(201,168,76,.2);
}
.frame-css-fallback::before,
.frame-css-fallback::after {
  content:''; position:absolute;
  width:32px; height:32px;
  border-color:var(--gold); border-style:solid; opacity:.9;
}
.frame-css-fallback::before { top:5px; left:5px; border-width:2px 0 0 2px; }
.frame-css-fallback::after  { bottom:5px; right:5px; border-width:0 2px 2px 0; }

/* Scroll hint */
.scroll-hint {
  display:flex; flex-direction:column; align-items:center; gap:8px;
  color:rgba(201,168,76,.6); font-size:.75rem; letter-spacing:.15em; text-transform:uppercase;
  margin-top:36px; position:relative; z-index:2;
  animation:fadeIn 1.5s 1.5s both;
}
.scroll-arrow { width:20px; height:20px; border-right:1.5px solid var(--gold); border-bottom:1.5px solid var(--gold); transform:rotate(45deg); animation:bounce 1.5s infinite; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SECTION HEADERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.section-header  { text-align:center; padding:80px 20px 50px; }
.section-tag     { font-family:'Dancing Script',cursive; font-size:1.2rem; color:var(--rose); display:block; margin-bottom:8px; }
.section-title   { font-family:'Playfair Display',serif; font-size:clamp(2rem,5vw,3.5rem); color:var(--gold-light); font-weight:400; font-style:italic; }
.section-divider { width:80px; height:1px; background:var(--gold); margin:20px auto 0; opacity:.5; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   POLAROID STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.featured-section { background:var(--deep); padding:0 0 80px; position:relative; }

.polaroid-strip {
  display:flex; gap:20px;
  overflow-x:auto; padding:40px 60px;
  scrollbar-width:none; -webkit-overflow-scrolling:touch;
}
.polaroid-strip::-webkit-scrollbar { display:none; }

.polaroid {
  flex:0 0 220px; background:#fff; padding:12px 12px 48px;
  box-shadow:0 8px 32px rgba(0,0,0,.5),0 2px 8px rgba(0,0,0,.3);
  transform:rotate(var(--rot,-2deg));
  transition:transform .3s ease,box-shadow .3s ease;
  cursor:pointer; position:relative;
}
.polaroid:hover { transform:rotate(0deg) scale(1.05); box-shadow:0 16px 48px rgba(0,0,0,.6); z-index:10; }

.polaroid-photo { width:100%; aspect-ratio:1; background:#e8dcc8; overflow:hidden; position:relative; }
.polaroid-photo img { width:100%; height:100%; object-fit:cover; filter:sepia(15%); display:block; }
.polaroid-photo-ph {
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center; flex-direction:column;
  background:linear-gradient(135deg,#e8dcc8,#d4c4a0);
  color:rgba(140,100,30,.5); font-size:.7rem;
  font-family:'Cormorant Garamond',serif; font-style:italic; gap:6px; text-align:center; padding:8px;
}
.polaroid-label { position:absolute; bottom:0; left:0; right:0; text-align:center; font-family:'Dancing Script',cursive; font-size:1rem; color:#555; padding:6px 4px 12px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GALLERY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.gallery-section { background:var(--warm); padding-bottom:100px; position:relative; }
.gallery-section::before { content:''; position:absolute; top:0; left:0; right:0; height:1px; background:linear-gradient(to right,transparent,var(--gold),transparent); }

.gallery-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:32px; max-width:1300px; margin:0 auto; padding:0 32px; }

.frame-card { position:relative; animation:fadeIn .6s both; transition:transform .4s cubic-bezier(.25,.46,.45,.94); }
.frame-card:hover { transform:translateY(-8px) scale(1.02); }
.frame-card:nth-child(3n+2) { margin-top:40px; }
.frame-card:nth-child(5n+1) { margin-top:-20px; }

.frame-inner {
  background:var(--frame-bg); padding:14px 14px 50px; position:relative;
  box-shadow:0 0 0 1px rgba(201,168,76,.3),0 4px 6px rgba(0,0,0,.3),0 12px 30px rgba(0,0,0,.4),inset 0 0 0 1px rgba(255,255,255,.1);
}
.frame-inner::before,.frame-inner::after { content:''; position:absolute; width:20px; height:20px; border-color:var(--gold); border-style:solid; opacity:.7; }
.frame-inner::before { top:5px; left:5px; border-width:2px 0 0 2px; }
.frame-inner::after  { bottom:30px; right:5px; border-width:0 2px 2px 0; }
.corner-tr { position:absolute; top:5px; right:5px; width:20px; height:20px; border:2px solid var(--gold); border-left:none; border-bottom:none; opacity:.7; }
.corner-bl { position:absolute; bottom:30px; left:5px; width:20px; height:20px; border:2px solid var(--gold); border-right:none; border-top:none; opacity:.7; }

.photo-wrapper { width:100%; aspect-ratio:1; overflow:hidden; position:relative; background:#2d200a; }
.photo-wrapper img { width:100%; height:100%; object-fit:cover; display:block; transition:transform .5s ease; filter:sepia(10%) contrast(1.05); }
.frame-card:hover .photo-wrapper img { transform:scale(1.05); }
.frame-card.wide .photo-wrapper { aspect-ratio:4/3; }
.frame-card.tall .photo-wrapper { aspect-ratio:3/4; }

.photo-placeholder { width:100%; height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(135deg,#2d1f0a,#1a1208); color:rgba(201,168,76,.4); gap:10px; font-family:'Cormorant Garamond',serif; font-size:.85rem; letter-spacing:.1em; font-style:italic; }
.photo-placeholder svg { opacity:.3; }

.frame-caption { text-align:center; padding:12px 8px 0; font-family:'Dancing Script',cursive; font-size:1.05rem; color:var(--gold-dark); line-height:1.4; }

#file-input { display:none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MESSAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.message-section { background:radial-gradient(ellipse at center,#2d1f0a 0%,var(--deep) 80%); padding:100px 20px; text-align:center; position:relative; overflow:hidden; }
.message-section::before { content:'âœ¦ âœ¦ âœ¦'; position:absolute; top:40px; left:50%; transform:translateX(-50%); color:rgba(201,168,76,.3); font-size:1.2rem; letter-spacing:1em; }
.big-message { font-family:'Playfair Display',serif; font-size:clamp(1.4rem,4vw,2.8rem); font-style:italic; line-height:1.6; max-width:700px; margin:0 auto; color:var(--cream); }
.big-message span { color:var(--gold-light); }
.signature { font-family:'Dancing Script',cursive; font-size:2rem; color:var(--rose); margin-top:50px; display:block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
footer { background:#0e0805; text-align:center; padding:40px 20px; border-top:1px solid rgba(201,168,76,.15); font-size:.85rem; color:rgba(253,246,227,.3); font-style:italic; font-family:'Cormorant Garamond',serif; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LIGHTBOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.lightbox { display:none; position:fixed; inset:0; background:rgba(0,0,0,.92); z-index:1000; align-items:center; justify-content:center; padding:20px; backdrop-filter:blur(4px); }
.lightbox.open { display:flex; }
.lightbox-content { position:relative; max-width:min(700px,90vw); max-height:90vh; animation:zoomIn .3s ease; }
.lightbox-content img { max-width:100%; max-height:80vh; object-fit:contain; border:8px solid var(--frame-bg); box-shadow:0 0 0 1px var(--gold),0 20px 60px rgba(0,0,0,.8); }
.lightbox-close { position:absolute; top:-16px; right:-16px; background:var(--gold); color:var(--deep); border:none; width:36px; height:36px; border-radius:50%; font-size:1.2rem; cursor:pointer; display:flex; align-items:center; justify-content:center; font-weight:bold; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MUSIC PLAYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.music-player { position:fixed; bottom:28px; right:28px; z-index:500; display:flex; flex-direction:column; align-items:flex-end; gap:12px; }

.music-fab { width:56px; height:56px; border-radius:50%; background:linear-gradient(135deg,var(--gold-dark),var(--gold)); border:none; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 20px rgba(0,0,0,.5); transition:transform .2s,box-shadow .2s; flex-shrink:0; }
.music-fab:hover { transform:scale(1.08); }
.music-fab.playing { animation:pulse-ring 2s infinite; }
.music-fab svg { width:22px; height:22px; fill:var(--deep); }

.music-card { background:rgba(26,16,8,.97); border:1px solid rgba(201,168,76,.3); border-radius:16px; padding:20px; width:290px; box-shadow:0 8px 40px rgba(0,0,0,.6); backdrop-filter:blur(12px); transform:scale(.9) translateY(10px); transform-origin:bottom right; opacity:0; pointer-events:none; transition:all .3s cubic-bezier(.34,1.56,.64,1); }
.music-card.open { transform:scale(1) translateY(0); opacity:1; pointer-events:all; }

.player-top { display:flex; align-items:center; gap:14px; margin-bottom:16px; }
.album-art  { width:52px; height:52px; border-radius:8px; background:linear-gradient(135deg,var(--gold-dark),var(--warm)); border:1px solid rgba(201,168,76,.4); display:flex; align-items:center; justify-content:center; flex-shrink:0; font-size:1.4rem; color:var(--gold); }
.album-art.spinning { animation:spin 4s linear infinite; }
.track-info { flex:1; min-width:0; }
.track-title  { font-family:'Playfair Display',serif; font-size:.95rem; color:var(--cream); font-style:italic; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.track-artist { font-size:.75rem; color:rgba(201,168,76,.7); margin-top:2px; }

.progress-wrap { margin-bottom:14px; }
.progress-bar  { width:100%; height:3px; background:rgba(201,168,76,.15); border-radius:2px; cursor:pointer; overflow:hidden; }
.progress-fill { height:100%; background:linear-gradient(to right,var(--gold-dark),var(--gold-light)); width:0%; transition:width .5s linear; }
.progress-times { display:flex; justify-content:space-between; font-size:.68rem; color:rgba(201,168,76,.5); margin-top:5px; }

.player-controls { display:flex; align-items:center; justify-content:center; gap:16px; margin-bottom:14px; }
.ctrl-btn { background:none; border:none; cursor:pointer; color:rgba(201,168,76,.7); padding:6px; border-radius:50%; display:flex; align-items:center; justify-content:center; transition:color .2s,background .2s; }
.ctrl-btn:hover { color:var(--gold-light); background:rgba(201,168,76,.1); }
.ctrl-btn svg { width:16px; height:16px; fill:currentColor; }
.ctrl-btn.main-play { width:44px; height:44px; background:linear-gradient(135deg,var(--gold-dark),var(--gold)); color:var(--deep); border-radius:50%; }
.ctrl-btn.main-play svg { width:18px; height:18px; }
.ctrl-btn.main-play:hover { background:linear-gradient(135deg,var(--gold),var(--gold-light)); }

.volume-row { display:flex; align-items:center; gap:8px; }
.volume-icon svg { width:14px; height:14px; fill:rgba(201,168,76,.5); }
input[type=range].vol-slider { flex:1; height:3px; -webkit-appearance:none; appearance:none; background:rgba(201,168,76,.2); border-radius:2px; outline:none; cursor:pointer; }
input[type=range].vol-slider::-webkit-slider-thumb { -webkit-appearance:none; width:12px; height:12px; border-radius:50%; background:var(--gold); cursor:pointer; }

.playlist { margin-top:14px; border-top:1px solid rgba(201,168,76,.1); padding-top:12px; max-height:130px; overflow-y:auto; scrollbar-width:thin; scrollbar-color:rgba(201,168,76,.3) transparent; }
.playlist-item { display:flex; align-items:center; gap:10px; padding:6px 8px; border-radius:8px; cursor:pointer; transition:background .2s; }
.playlist-item:hover  { background:rgba(201,168,76,.08); }
.playlist-item.active { background:rgba(201,168,76,.12); }
.playlist-num  { font-size:.7rem; color:rgba(201,168,76,.4); width:16px; text-align:center; flex-shrink:0; }
.playlist-item.active .playlist-num { color:var(--gold); }
.playlist-name { font-size:.82rem; color:rgba(253,246,227,.7); flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.playlist-item.active .playlist-name { color:var(--cream); }
.playlist-dur  { font-size:.7rem; color:rgba(201,168,76,.4); flex-shrink:0; }

.upload-music-btn { display:flex; align-items:center; justify-content:center; gap:6px; width:100%; background:none; border:1px dashed rgba(201,168,76,.25); color:rgba(201,168,76,.5); font-family:'Cormorant Garamond',serif; font-size:.8rem; font-style:italic; padding:7px 10px; border-radius:8px; cursor:pointer; margin-top:10px; transition:all .2s; }
.upload-music-btn:hover { border-color:rgba(201,168,76,.5); color:var(--gold); background:rgba(201,168,76,.05); }
#music-file-input { display:none; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESPONSIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media (max-width:600px) {
  .gallery-grid { grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:20px; padding:0 16px; }
  .frame-card:nth-child(3n+2),.frame-card:nth-child(5n+1) { margin-top:0; }
  .polaroid-strip { padding:30px 24px; }
  .music-player { bottom:16px; right:16px; }
  .music-card { width:260px; }
  .hero-portrait-frame { width:clamp(240px,85vw,360px); }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INSTRUCTION MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

.instruction-modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(4px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 11000;
  padding: 20px;
}

.instruction-modal.open {
  display: flex;
}

.instruction-card {
  background: #fdf6e3;
  max-width: 650px;
  width: 100%;
  padding: 50px 40px;
  border-radius: 16px;
  box-shadow: 0 30px 80px rgba(0,0,0,0.5);
  text-align: center;
  animation: zoomIn .4s ease;
}

.instruction-title {
  font-family: 'Playfair Display', serif;
  font-size: 2rem;
  font-weight: 700;
  color: #1a1008;
  margin-bottom: 10px;
}

.instruction-divider {
  width: 80px;
  height: 1px;
  margin: 20px auto;
  background: linear-gradient(to right, transparent, #c9a84c, transparent);
}

.instruction-intro {
  font-family: 'Cormorant Garamond', serif;
  font-style: italic;
  font-size: 1.1rem;
  color: #2d1f0a;
  line-height: 1.7;
  margin-bottom: 30px;
}

.instruction-list {
  text-align: left;
  margin-bottom: 40px;
  padding-left: 20px;
  font-family: 'Cormorant Garamond', serif;
  color: #1a1008;
  line-height: 1.7;
  font-size: 1rem;
}

.instruction-list li {
  margin-bottom: 18px;
}

.instruction-list li::marker {
  color: #c9a84c;
  font-weight: bold;
}

.instruction-btn {
  font-family: 'Cormorant Garamond', serif;
  font-style: italic;
  font-size: 1.1rem;
  padding: 14px 40px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  background: linear-gradient(135deg, #c9a84c, #e8c97a);
  color: #1a1008;
  transition: transform .2s ease, box-shadow .2s ease;
}

.instruction-btn:hover {
  transform: scale(1.04);
  box-shadow: 0 10px 25px rgba(201,168,76,.4);
}


.instruction-note {
  font-family: 'Cormorant Garamond', serif;
  font-style: italic;
  font-size: 0.95rem;
  color: #8a6820;
  margin-bottom: 25px;
}

</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     WELCOME OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="welcome-overlay">
  <div id="overlay-sparkles"></div>
  <p class="ov-tag">âœ¦ a gift just for you âœ¦</p>
  <h1 class="ov-title">Happy<br>Birthday</h1>
  <h2 class="ov-name">Ugieubua</h2>
  <button class="ov-btn" onclick="enterSite()">âœ¦ &nbsp;Tap to Enter&nbsp; âœ¦</button>
  <p class="ov-hint">music &amp; memories await</p>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     INSTRUCTION MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="instruction-modal" class="instruction-modal">
  <div class="instruction-card">
    
    <h2 class="instruction-title">Read before proceeding</h2>
    <div class="instruction-divider"></div>

    <p class="instruction-intro">
      Take note of these things as you journey into our memories,
      it will help you easily navigate.
    </p>

    <ol class="instruction-list">
      <li>
        You can click on each image on both Polaroid and gallery
        to expand it and get a better and larger view.
      </li>

      <li>
        For easier scrolling of the Polaroid slide images,
        scroll till the â€œA Glimpse Through Timeâ€ leaves the screen
        and the Polaroid slide is at the top of the screen.
        You should already be seeing â€œThe Gallery of Memoriesâ€
        at the bottom.
      </li>

      <li>
        You can next the song, pause or play it at the bottom right.
      </li>
    </ol>

    
<p class="instruction-note">
  To come back here, just refresh your browser.
</p>

    <button class="instruction-btn" onclick="proceedToSite()">
      Letâ€™s go
    </button>

  </div>
</div>


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="hero" id="home">
  <div class="sparkles" id="sparkles"></div>

  <p class="hero-eyebrow">âœ¦ This one is for you âœ¦</p>
  <h1 class="hero-title">Happy Birthday</h1>
  <h2 class="hero-name">Maryann Baby</h2>

  <div class="divider">
    <div class="divider-line"></div>
    <div class="divider-diamond"></div>
    <div class="divider-diamond" style="width:4px;height:4px;margin:0 4px;opacity:.5"></div>
    <div class="divider-diamond"></div>
    <div class="divider-line"></div>
  </div>

  <p class="hero-message">"In the garden of memories, every moment we've shared is a flower that never fades."</p>

  <!-- BIG PORTRAIT FRAME -->
  <div class="hero-portrait-wrap">
    <div class="hero-portrait-frame" onclick="document.getElementById('hero-photo-input').click()">

      <!-- Photo -->
      <div class="hero-portrait-photo">
        <img id="hero-portrait-img" src="hero-portrait.jpg" alt="Portrait">
        <div class="hero-ph" id="hero-ph" style="display:none;">
          <svg width="52" height="52" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
          <span>Her most recent photo</span>
          <small>Rename to hero-portrait.jpg &amp; place in folder</small>
        </div>
      </div>

      <!-- CSS fallback shown when no hero-frame.png is present -->
      <div class="frame-css-fallback" id="frame-css-fallback" style="display:none;"></div>

      <input type="file" id="hero-photo-input" accept="image/*" style="display:none">
    </div>
  </div>

  <div class="scroll-hint">
    <span>explore memories</span>
    <div class="scroll-arrow"></div>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     POLAROID STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="featured-section">
  <div class="section-header">
    <span class="section-tag">âœ¦ Favourite moments âœ¦</span>
    <h2 class="section-title">A Glimpse Through Time</h2>
    <div class="section-divider"></div>
  </div>
  <div class="polaroid-strip" id="polaroid-strip"></div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GALLERY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="gallery-section" id="gallery">
  <div class="section-header">
    <span class="section-tag">âœ¦ A collection of us âœ¦</span>
    <h2 class="section-title">The Gallery of Memories</h2>
    <div class="section-divider"></div>
  </div>
  <div class="gallery-grid" id="gallery-grid"></div>
  <input type="file" id="file-input" multiple accept="image/*">
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MESSAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="message-section">
  <p class="big-message">
    "Every laugh we shared, every conversations weâ€™ve had, especially the Sunday convos, every time you stopped by to say Hi â€”
    <span>these are gifts I really treasure.</span>
    Today, the world gets to celebrate what I already know: you are extraordinary, and this life is more beautiful because you are in it."
  </p>
  <span class="signature" id="signature-from"></span>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FOOTER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer>Made with love, for someone who deserves the whole world. âœ¦ Happy Birthday</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MUSIC PLAYER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="music-player">
  <div class="music-card" id="music-card">
    <div class="player-top">
      <div class="album-art" id="album-art">â™ª</div>
      <div class="track-info">
        <div class="track-title"  id="track-title">No track loaded</div>
        <div class="track-artist" id="track-artist">Add songs below â™ª</div>
      </div>
    </div>
    <div class="progress-wrap">
      <div class="progress-bar" id="progress-bar" onclick="seekTo(event)">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <div class="progress-times">
        <span id="time-current">0:00</span>
        <span id="time-total">0:00</span>
      </div>
    </div>
    <div class="player-controls">
      <button class="ctrl-btn" onclick="prevTrack()"><svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg></button>
      <button class="ctrl-btn main-play" onclick="togglePlay()"><svg id="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
      <button class="ctrl-btn" onclick="nextTrack()"><svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zm8.5-6v6h2V6h-2v6z"/></svg></button>
    </div>
    <div class="volume-row">
      <span class="volume-icon"><svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg></span>
      <input type="range" class="vol-slider" min="0" max="1" step="0.02" value="0.8" oninput="audio.volume=this.value">
    </div>
    <div class="playlist" id="playlist"></div>
    <input type="file" id="music-file-input" multiple accept="audio/*">
    <button class="upload-music-btn" onclick="document.getElementById('music-file-input').click()">â™ª Add your songs</button>
  </div>
  <button class="music-fab" id="music-fab" onclick="togglePlayer()">
    <svg id="fab-icon" viewBox="0 0 24 24"><path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/></svg>
  </button>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LIGHTBOX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
  <div class="lightbox-content">
    <button class="lightbox-close" onclick="closeLightbox(null)">âœ•</button>
    <img id="lightbox-img" src="" alt="">
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFIG â€” only edit this block
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const CONFIG = {
  birthdayPersonName: "Maryann Baby",
  fromName: "With all my love, I celebrate this day with you. Happy birthday once again, My Geeâ¤ï¸",

  galleryPhotos: [
    { src:"gallery-01.jpg", caption:"My favorite picture of you then" },
    { src:"gallery-02.jpg", caption:"When people posted pictures with their loved ones name ğŸŒš lol", style:"wide" },
    { src:"gallery-03.jpg", caption:"No! That's not me ğŸ˜‚", style:"tall" },
    { src:"gallery-04.jpg", caption:"I look just like Oyenusi with that smile and the hair. Lol. Young us ğŸ¥°" },
    { src:"gallery-05.jpg", caption:"I don't know what I was trying to say, but I remember this day like yesterday. one Sunday like that." },
    { src:"gallery-06.jpg", caption:"This! Lol ğŸ˜‚", style:"wide" },
    { src:"gallery-07.jpg", caption:"It's been a long way coming yunno!" },
    { src:"gallery-08.jpg", caption:"This particular cloth material, remember we shared it? ğŸ˜‚" },
    { src:"gallery-09.jpg", caption:"and this birthday design. I can't even remember the year, but it's a testament to how much we've grown.", style:"tall" },
    { src:"gallery-10.jpg", caption:"ğŸŒš" },
    { src:"gallery-11.jpg", caption:"What I call you some years back" },
    { src:"gallery-12.jpg", caption:"You, Mistura and Oyinda. I think this is the oldest photo of you I have." },
    { src:"gallery-13.jpg", caption:"Now, look at my babyyyyy! ğŸ˜ğŸ¥°" },
  ],

  polaroidPhotos: [
    { src:"polaroid-01.jpg", label:"My Gee" },
    { src:"polaroid-02.jpg", label:"The most elegant" },
    { src:"polaroid-03.jpg", label:"look at us about 10 years ago ğŸ˜‚" },
    { src:"polaroid-04.jpg", label:"and us last year ğŸ¥°" },
    { src:"polaroid-05.jpg", label:"I can't even remember when this picture was taken" },
    { src:"polaroid-06.jpg", label:"The modella" },
    { src:"polaroid-07.jpg", label:"Birthday 2017 I guess ğŸŒš" },
  ],

  /* Update name/artist to show real song info in the player */
  songs: [
    { name:"Birthdaygirl", artist:"amyna Love", url:"song-01.mp3" },
    { name:"You've gat a friend in me", artist:"Randy Newman", url:"song-02.mp3" },
    { name:"Happy Birthday", artist:"Busy Signal", url:"song-03.mp3" },
    { name:"Happy Birthday Beautiful", artist:"Pentatonix x Ringo", url:"song-04.mp3" },
    { name:"Song 5", artist:"Artist", url:"song-05.mp3" },
  ],
};

/* Apply names */
const sigEl = document.getElementById('signature-from');
sigEl.innerHTML = '<span style="display:block;color:#fdf6e3;font-family:\'Dancing Script\',cursive;font-size:2rem;">With all my love, I celebrate this day with you.</span><span style="display:block;color:#c9a84c;font-family:\'Dancing Script\',cursive;font-size:2rem;margin-top:8px;">Happy birthday once again, My Geeâ¤ï¸</span>';
document.title = `Happy Birthday, ${CONFIG.birthdayPersonName}! âœ¨`;

/* â”€â”€â”€ Sparkles â”€â”€â”€ */
function makeSparkles(id, n) {
  const c = document.getElementById(id);
  for (let i = 0; i < n; i++) {
    const s = document.createElement('div');
    const sz = 1 + Math.random() * 3;
    s.className = 'sparkle';
    s.style.cssText = `left:${Math.random()*100}%;top:${Math.random()*100}%;width:${sz}px;height:${sz}px;--dur:${2+Math.random()*4}s;--delay:${Math.random()*5}s;`;
    c.appendChild(s);
  }
}
makeSparkles('overlay-sparkles', 70);
makeSparkles('sparkles', 60);

/* â”€â”€â”€ Welcome overlay â”€â”€â”€ */
let tracks = [];
CONFIG.songs.forEach(s => tracks.push(s));

function enterSite() {
  document.getElementById('instruction-modal').classList.add('open');
}

function proceedToSite() {
  const modal = document.getElementById('instruction-modal');
  const overlay = document.getElementById('welcome-overlay');

  modal.classList.remove('open');

  overlay.style.opacity = '0';
  overlay.style.pointerEvents = 'none';

  setTimeout(() => overlay.remove(), 800);

  if (tracks.length > 0) loadTrack(0, true);
}

/* â”€â”€â”€ Placeholder helpers â”€â”€â”€ */
function galleryPlaceholder() {
  const d = document.createElement('div');
  d.className = 'photo-placeholder';
  d.innerHTML = '<svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg><span>memory awaits</span>';
  return d;
}
function polaroidPlaceholder() {
  const d = document.createElement('div');
  d.className = 'polaroid-photo-ph';
  d.innerHTML = '<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg><span>memory awaits</span>';
  return d;
}

/* â”€â”€â”€ Build gallery â”€â”€â”€ */
const grid = document.getElementById('gallery-grid');

CONFIG.galleryPhotos.forEach((p, i) => {
  const card = document.createElement('div');
  card.className = 'frame-card ' + (p.style || '');
  card.style.animationDelay = `${i * 0.07}s`;

  const inner = document.createElement('div');
  inner.className = 'frame-inner';

  const ctr = document.createElement('span'); ctr.className = 'corner-tr';
  const cbl = document.createElement('span'); cbl.className = 'corner-bl';

  const wrap = document.createElement('div');
  wrap.className = 'photo-wrapper';
  wrap.style.cursor = 'pointer';
  wrap.addEventListener('click', () => openLightbox(p.src));

  const img = document.createElement('img');
  img.src = p.src;
  img.alt = p.caption;
  img.loading = 'lazy';
  img.addEventListener('error', function() {
    wrap.innerHTML = '';
    wrap.appendChild(galleryPlaceholder());
  });

  const caption = document.createElement('div');
  caption.className = 'frame-caption';
  caption.textContent = p.caption;

  wrap.appendChild(img);
  inner.append(ctr, cbl, wrap, caption);
  card.appendChild(inner);
  grid.appendChild(card);
});

/* â”€â”€â”€ Build polaroids â”€â”€â”€ */
const rots = [-3, 2, -1.5, 3.5, -2.5, 1, -4, 2.5, -1, 3];

CONFIG.polaroidPhotos.forEach((p, i) => {
  const el = document.createElement('div');
  el.className = 'polaroid';
  el.style.setProperty('--rot', `${rots[i % rots.length]}deg`);

  const photoDiv = document.createElement('div');
  photoDiv.className = 'polaroid-photo';
  photoDiv.style.cursor = 'pointer';
  photoDiv.addEventListener('click', () => openLightbox(p.src));

  const img = document.createElement('img');
  img.src = p.src;
  img.alt = p.label;
  img.loading = 'lazy';
  img.addEventListener('error', function() {
    photoDiv.innerHTML = '';
    photoDiv.appendChild(polaroidPlaceholder());
  });

  const label = document.createElement('div');
  label.className = 'polaroid-label';
  label.textContent = p.label;

  photoDiv.appendChild(img);
  el.append(photoDiv, label);
  document.getElementById('polaroid-strip').appendChild(el);
});

/* â”€â”€â”€ Lightbox â”€â”€â”€ */
function openLightbox(src) {
  document.getElementById('lightbox-img').src = src;
  document.getElementById('lightbox').classList.add('open');
  document.body.style.overflow = 'hidden';
}
function closeLightbox(e) {
  if (!e || e.target === document.getElementById('lightbox') || e.target.classList.contains('lightbox-close')) {
    document.getElementById('lightbox').classList.remove('open');
    document.body.style.overflow = '';
  }
}
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeLightbox(null); });

/* â”€â”€â”€ Hero portrait error handling â”€â”€â”€ */
var heroImg = document.getElementById('hero-portrait-img');
heroImg.addEventListener('error', function() {
  heroImg.style.display = 'none';
  document.getElementById('hero-ph').style.display = 'flex';
});

/* â”€â”€â”€ Hero portrait live upload â”€â”€â”€ */
document.getElementById('hero-photo-input').addEventListener('change', function() {
  if (!this.files[0]) return;
  const url = URL.createObjectURL(this.files[0]);
  const img = document.getElementById('hero-portrait-img');
  img.src = url;
  img.style.display = 'block';
  document.getElementById('hero-ph').style.display = 'none';
});

/* â”€â”€â”€ Music player â”€â”€â”€ */
const audio = new Audio();
audio.volume = 0.8;
let currentTrack = -1, playerOpen = false;

function renderPlaylist() {
  const pl = document.getElementById('playlist');
  pl.innerHTML = '';
  if (!tracks.length) {
    pl.innerHTML = '<p style="text-align:center;color:rgba(201,168,76,.3);font-size:.78rem;font-style:italic;padding:8px 0;">No songs yet</p>';
    return;
  }
  tracks.forEach((t, i) => {
    const item = document.createElement('div');
    item.className = 'playlist-item' + (i === currentTrack ? ' active' : '');
    item.innerHTML = `<span class="playlist-num">${i === currentTrack ? 'â™ª' : i+1}</span><span class="playlist-name">${t.name}</span><span class="playlist-dur">${t.duration||''}</span>`;
    item.onclick = () => loadTrack(i, true);
    pl.appendChild(item);
  });
}

function loadTrack(index, autoplay=false) {
  if (index < 0 || index >= tracks.length) return;
  currentTrack = index;
  const t = tracks[index];
  audio.src = t.url;
  document.getElementById('track-title').textContent  = t.name;
  document.getElementById('track-artist').textContent = t.artist || 'Your Playlist';
  document.getElementById('progress-fill').style.width = '0%';
  document.getElementById('time-current').textContent = '0:00';
  document.getElementById('time-total').textContent   = '0:00';
  renderPlaylist();
  if (autoplay) audio.play().then(updateUI).catch(()=>{});
}

function togglePlay() {
  if (!tracks.length) { document.getElementById('music-file-input').click(); return; }
  if (currentTrack === -1) { loadTrack(0, true); return; }
  audio.paused ? audio.play().then(updateUI).catch(()=>{}) : (audio.pause(), updateUI());
}

function updateUI() {
  const p = !audio.paused;
  document.getElementById('music-fab').classList.toggle('playing', p);
  document.getElementById('album-art').classList.toggle('spinning', p);
  document.getElementById('play-icon').innerHTML = p
    ? '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'
    : '<path d="M8 5v14l11-7z"/>';
}

function prevTrack() { if (tracks.length) loadTrack((currentTrack-1+tracks.length)%tracks.length,!audio.paused); }
function nextTrack() { if (tracks.length) loadTrack((currentTrack+1)%tracks.length,!audio.paused); }

function seekTo(e) {
  if (!audio.duration) return;
  const r = document.getElementById('progress-bar').getBoundingClientRect();
  audio.currentTime = Math.max(0,Math.min(1,(e.clientX-r.left)/r.width)) * audio.duration;
}

function fmt(s) { return isNaN(s) ? '0:00' : `${Math.floor(s/60)}:${String(Math.floor(s%60)).padStart(2,'0')}`; }

audio.addEventListener('timeupdate', () => {
  if (!audio.duration) return;
  document.getElementById('progress-fill').style.width = (audio.currentTime/audio.duration*100)+'%';
  document.getElementById('time-current').textContent = fmt(audio.currentTime);
});
audio.addEventListener('loadedmetadata', () => {
  document.getElementById('time-total').textContent = fmt(audio.duration);
  if (currentTrack >= 0) { tracks[currentTrack].duration = fmt(audio.duration); renderPlaylist(); }
});
audio.addEventListener('ended',  () => { nextTrack(); updateUI(); });
audio.addEventListener('play',   updateUI);
audio.addEventListener('pause',  updateUI);
audio.addEventListener('error',  function() { updateUI(); });

function togglePlayer() {
  playerOpen = !playerOpen;
  document.getElementById('music-card').classList.toggle('open', playerOpen);
  document.getElementById('fab-icon').innerHTML = playerOpen
    ? '<path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>'
    : '<path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/>';
}

document.getElementById('music-file-input').addEventListener('change', function() {
  Array.from(this.files).forEach(file => {
    tracks.push({ name:file.name.replace(/\.[^.]+$/,''), artist:'Your Playlist', url:URL.createObjectURL(file), duration:'' });
  });
  if (currentTrack === -1 && tracks.length) loadTrack(0, true);
  renderPlaylist();
  if (!playerOpen) togglePlayer();
});

renderPlaylist();
</script>
</body>
</html>
